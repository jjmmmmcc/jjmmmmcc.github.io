<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://use.typekit.net/htg0syf.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>João Chaves</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    
    <style>
        /* Basic styles for the whole page */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: "univers-next-pro", sans-serif;
            background-color: #f0f0f0;
            overflow: hidden;
            cursor: pointer;
        }

        /* Styles for the text in the top-left corner */
        .info-text {
            position: absolute;
            top: 30px;
            left: 30px;
            z-index: 10;
            color: #333;
            font-size: 16px;
            font-family: "univers-next-pro", sans-serif;
            font-weight: 500;
            font-style: normal;
            max-width: 530px;
            transition: color 0.4s ease-in-out;
        }

        /* --- FIX: Remove default paragraph margin for precise alignment --- */
        .info-text p {
            margin: 0;
        }

        /* Styles for links to match the text color */
        .info-text a {
            color: inherit; /* This makes the link inherit the dynamic color (black or white) */
            text-decoration: none; /* Removes the default underline */
        }

        .info-text a:hover {
            text-decoration: underline; /* Adds an underline when you hover over the link */
        }

        /* Container to hold the image */
        .image-container {
            width: 100vw;
            height: 100vh;
        }

        /* Styles for the full bleed image */
        #portfolio-image {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <!-- Informational text block -->
    <div class="info-text">
        <!-- The text is now wrapped in a single paragraph for proper structure -->
        <p>João Chaves, designer and art director. Based in Bristol, UK.
        Currently collaborating with <a href="https://www.clubhouse.studio" target="_blank">Clubhouse Studio</a>.
        Making music as <a href="https://www.penhasdouradas.eu" target="_blank">Penhas Douradas</a>.
        For commissions or collaborations feel free to drop me an <a href="mailto:info@joao-chaves.com">e-mail</a>.</p>
    </div>

    <!-- Image container -->
    <div class="image-container">
        <img id="portfolio-image" src="images/1.jpg" alt="Portfolio Image">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const imageList = [
                'images/1.jpg', 'images/2.jpg', 'images/3.jpg', 'images/4.jpg',
                'images/5.jpg', 'images/6.jpg', 'images/7.jpg', 'images/8.jpg',
                'images/9.jpg', 'images/10.jpg', 'images/11.jpg', 'images/12.jpg',
                'images/13.jpg', 'images/14.jpg', 'images/15.jpg', 'images/16.jpg',
                'images/17.jpg', 'images/18.jpg', 'images/19.jpg', 'images/20.jpg',
                'images/21.jpg', 'images/22.jpg', 'images/23.jpg', 'images/24.jpg',
                'images/25.jpg', 'images/26.jpg', 'images/27.jpg', 'images/28.jpg',
                'images/29.jpg', 'images/30.jpg', 'images/31.jpg', 'images/32.jpg',
                'images/34.jpg', 'images/35.jpg', 'images/Berghaus-1.jpg',
                'images/RS356776_salford_central_station-11-scr.jpg',
            ];

            const portfolioImage = document.getElementById('portfolio-image');
            const infoText = document.querySelector('.info-text');
            const imageContainer = document.querySelector('.image-container');
            let currentImageIndex = 0;
            let imageChangeTimer; 
            
            portfolioImage.onerror = () => {
                console.error("Image failed to load. Check folder structure and path:", portfolioImage.src);
            };

            portfolioImage.onload = () => {
                updateTextColor();
            };
            
            function updateTextColor() {
                if (!portfolioImage.naturalWidth || !portfolioImage.naturalHeight) {
                    return; 
                }

                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                const checkWidth = infoText.offsetWidth;
                const checkHeight = infoText.offsetHeight;

                canvas.width = checkWidth;
                canvas.height = checkHeight;
                
                context.drawImage(portfolioImage, 0, 0, checkWidth, checkHeight, 0, 0, checkWidth, checkHeight);
                
                const imageData = context.getImageData(0, 0, checkWidth, checkHeight).data;
                
                let totalBrightness = 0;
                for (let i = 0; i < imageData.length; i += 4) {
                    const r = imageData[i];
                    const g = imageData[i+1];
                    const b = imageData[i+2];
                    const brightness = (r * 299 + g * 587 + b * 114) / 1000;
                    totalBrightness += brightness;
                }
                
                const averageBrightness = totalBrightness / (checkHeight * checkWidth);
                const brightnessThreshold = 105; 
                
                if (averageBrightness < brightnessThreshold) {
                    infoText.style.color = '#ffffff';
                } else {
                    infoText.style.color = '#333333';
                }
            }

            function changeImage() {
                currentImageIndex = (currentImageIndex + 1) % imageList.length;
                portfolioImage.src = imageList[currentImageIndex];
            }

            function startTimer() {
                clearInterval(imageChangeTimer);
                imageChangeTimer = setInterval(changeImage, 4000);
            }

            imageContainer.addEventListener('click', () => {
                changeImage();
                startTimer();
            });
            
            startTimer();
            setTimeout(updateTextColor, 100);
        });
    </script>
    
</body>
</html>

